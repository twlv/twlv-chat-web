(window.webpackJsonp=window.webpackJsonp||[]).push([[2,10,11],{175:function(e,s,n){"use strict";n.r(s);var t=n(49),a=n(36);n(363);Object(t.b)("tc-conversation",class extends a.View{get template(){return n(362)}get props(){return Object.assign({},super.props,{name:{type:String,value:"To ..."},form:{type:Object,value:()=>({})},messages:{type:Array,value:()=>[]},classLine:{type:String,value:"line"},channelAddress:{type:String,value:""}})}created(){super.created(),this._onChannelUpdate=this._onChannelUpdate.bind(this)}focused(){super.focused(),this.__app.chat.on("channel:update",this._onChannelUpdate)}blurred(){super.blurred(),this.__app.chat.removeListener("channel:update",this._onChannelUpdate)}focusing(){super.focusing(),this.async(async()=>{this.channelId=this.parameters.id,this.$.messageField.focus();let e=await this.__app.chat.prepareChannel(this.channelId),s=e.members.splice(e.members.indexOf(e.members[this.__app.node.identity.address]),1);this.set("channelAddress",s.pop()),this.render(e)})}async sendMessage(e){e.preventDefault();let s=this.form.message;await this.__app.chat.send({channelId:this.channelId,content:s}),this.set("form.message",""),this.$.messageField.value=""}render(e){this.set("messages",[]),this.set("messages",e.entries);let s=this.$.messagesPane;setTimeout(()=>{s.scrollTo(0,s.scrollHeight)},500)}isMyChat(e){return e===this.__app.node.identity.address}_onChannelUpdate(e){e.id===this.parameters.id&&this.render(e)}startCall(e){if(e.preventDefault(),!this.channelAddress)throw new Error("Address is required");let s=this.__app.call.createSession();this.__app.navigate(`/connect/${s.id}/${this.channelAddress}`)}})},362:function(e,s){e.exports='<div class="vertical layout">\n  <div class="friend-chat">\n    <div>\n      <img class="address" src="https://www.theladders.com/wp-content/uploads/Mentally_Stron_040418-800x450.jpg" alt="">\n      <h3>[[name]]</h3>\n      <span>online</span>\n    </div>\n    <div>\n      <img class="phone" (click)="startCall(evt)" src="https://cdn.shopify.com/s/files/1/1854/1819/files/phone-blue-icon.png?16594292423607258669" alt="">\n    </div>\n  </div>\n\n  <div id="messagesPane" class="messages flex">\n    <xin-for items="[[messages]]" as="message">\n      <template>\n        <div class="line" class.my="[[isMyChat(message.address)]]">\n          <span class="name">[[message.address]]</span>\n          <p class="chat">[[message.content]] <span>[[message.t]]</span></p>\n        </div>\n      </template>\n    </xin-for>\n  </div>\n\n  <form class="message layout">\n    <input id="messageField" class="flex form-control" type="text" placeholder="Write your message..." value="{{form.message}}">\n    <input type="submit" (click)="sendMessage(evt)" class="btn btn-info" value="Send">\n  </form>\n</div>\n'},363:function(e,s,n){}}]);